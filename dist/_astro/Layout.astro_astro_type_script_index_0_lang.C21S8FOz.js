const _={theme:localStorage.getItem("theme")||"light",fontSize:parseInt(localStorage.getItem("fontSize")||"16",10),focusMode:localStorage.getItem("focusMode")==="true"};document.addEventListener("DOMContentLoaded",function(){h(),C(),m(),p(),f(),k(),v(),b()});function h(){const e=document.getElementById("themeToggle"),n=e?.querySelector(".theme-icon");document.documentElement.setAttribute("data-theme",_.theme),n&&(n.textContent=_.theme==="dark"?"☀️":"🌙"),e?.addEventListener("click",()=>{_.theme=_.theme==="dark"?"light":"dark",document.documentElement.setAttribute("data-theme",_.theme),localStorage.setItem("theme",_.theme),n&&(n.textContent=_.theme==="dark"?"☀️":"🌙")})}function C(){const e=document.getElementById("decreaseFont"),n=document.getElementById("increaseFont");document.body.style.fontSize=_.fontSize+"px",e?.addEventListener("click",()=>{_.fontSize>12&&(_.fontSize-=2,document.body.style.fontSize=_.fontSize+"px",localStorage.setItem("fontSize",_.fontSize.toString()))}),n?.addEventListener("click",()=>{_.fontSize<24&&(_.fontSize+=2,document.body.style.fontSize=_.fontSize+"px",localStorage.setItem("fontSize",_.fontSize.toString()))})}function m(){const e=document.getElementById("toggleReadingMode");_.focusMode?(document.body.classList.add("focus-mode"),e&&(e.textContent="📚",e.title="退出专注模式"),s()):(document.body.classList.remove("focus-mode"),e&&(e.textContent="📖",e.title="专注阅读模式"),d()),e?.addEventListener("click",()=>{document.body.classList.toggle("focus-mode"),_.focusMode=document.body.classList.contains("focus-mode"),e&&(e.textContent=_.focusMode?"📚":"📖",e.title=_.focusMode?"退出专注模式":"专注阅读模式"),localStorage.setItem("focusMode",_.focusMode.toString()),_.focusMode?s():d()})}function p(){const e=document.getElementById("sidebarToggle"),n=document.getElementById("sidebar");e?.addEventListener("click",()=>{n?.classList.toggle("open")}),document.addEventListener("click",t=>{const i=t.target;n&&e&&i&&!n.contains(i)&&!e.contains(i)&&n.classList.remove("open")}),g()}function g(){const e=document.getElementById("sidebarTitle"),n=document.getElementById("sidebarNav");if(!e||!n)return;const t=window.location.pathname;let i="home";t==="/"||t==="/index.html"?i="home":t.startsWith("/000_")||t.startsWith("/001_")||t.startsWith("/002_")||t.startsWith("/003_")||t.startsWith("/004_")||t.startsWith("/005_")||t.startsWith("/006_")||t.startsWith("/007_")||t.startsWith("/008_")||t.startsWith("/009_")||t.startsWith("/010_")||t.startsWith("/011_")?i="theory":t.includes("/macro")?i="macro":t.includes("/stocks")?i="stocks":t.includes("/technical")?i="technical":t.includes("/quantitative")&&(i="quantitative");const a={home:{title:"📚 美股投资实操手册",chapters:[{number:"📖",title:"美股投资实操手册I",url:"/001_Chapter1_Know_Yourself_and_the_World_CN"},{number:"🌍",title:"美股投资实操手册II",url:"/handbook/macro"},{number:"🔍",title:"美股投资实操手册III",url:"/handbook/stocks"},{number:"📊",title:"美股投资实操手册IV",url:"/handbook/technical"},{number:"⚡",title:"美股投资实操手册V",url:"/handbook/quantitative"}]},theory:{title:"📖 美股投资实操手册I",chapters:[{number:"📖",title:"序言",url:"/000_Preface_CN"},{number:"1️⃣",title:"第一章：投资认知起点",url:"/001_Chapter1_Know_Yourself_and_the_World_CN"},{number:"2️⃣",title:"第二章：投资心理与风险管理",url:"/002_Chapter2_Investment_Psychology_and_Risk_Management_CN"},{number:"3️⃣",title:"第三章：历史规律与高倍股研究",url:"/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN"},{number:"4️⃣",title:"第四章：赛道选择与行业趋势",url:"/004_Chapter4_Track_Selection_and_Industry_Trends_CN"},{number:"5️⃣",title:"第五章：股票筛选策略",url:"/005_Chapter5_Stock_Screening_Strategies_CN"},{number:"6️⃣",title:"第六章：交易策略与执行",url:"/006_Chapter6_Trading_Strategies_and_Execution_CN"},{number:"7️⃣",title:"第七章：投资决策工具与资源",url:"/007_Chapter7_Investment_Decision_Tools_and_Resources_CN"},{number:"8️⃣",title:"第八章：案例复盘与策略改进",url:"/008_Chapter8_Case_Review_and_Strategy_Improvement_CN"},{number:"9️⃣",title:"第九章：构建投资体系",url:"/009_Chapter9_Building_an_Investment_System_CN"},{number:"🔟",title:"第十章：交易执行与实战指南",url:"/010_Chapter10_Trading_Execution_and_Practical_Guide_CN"},{number:"📋",title:"附录",url:"/011_Appendix_CN"}]},macro:{title:"🌍 美股投资实操手册II",chapters:[{number:"📖",title:"宏观经济分析",url:"/handbook/macro"}]},stocks:{title:"🔍 美股投资实操手册III",chapters:[{number:"📖",title:"个股分析",url:"/handbook/stocks"}]},technical:{title:"📊 美股投资实操手册IV",chapters:[{number:"📖",title:"技术分析",url:"/handbook/technical"}]},quantitative:{title:"⚡ 美股投资实操手册V",chapters:[{number:"📖",title:"量化分析",url:"/handbook/quantitative"}]}},o=a[i]||a.home;e.textContent=o.title;const u=o.chapters.map(r=>`
          <a href="${r.url}" class="nav-item ${r.url===window.location.pathname?"active":""}">
            <span class="chapter-number">${r.number}</span>
            <span class="chapter-title">${r.title}</span>
          </a>
        `).join("");n.innerHTML=u}function f(){const e=document.getElementById("homeBtn"),n=document.getElementById("tocBtn");document.getElementById("prevChapter"),document.getElementById("nextChapter");const t=document.getElementById("prevPageBtn"),i=document.getElementById("nextPageBtn");e?.addEventListener("click",()=>{window.location.href="/"}),n?.addEventListener("click",a=>{a.preventDefault();const o=N();o&&(window.location.href=o)}),t?.addEventListener("click",()=>{y()}),i?.addEventListener("click",()=>{S()}),I()}function N(){const e=window.location.pathname;return e==="/"?"/":e.includes("/001_Chapter1/")?"/001_Chapter1_Know_Yourself_and_the_World_CN":e.includes("/002_Chapter2/")?"/002_Chapter2_Investment_Psychology_and_Risk_Management_CN":e.includes("/003_Chapter3/")?"/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN":e.includes("/004_Chapter4/")?"/004_Chapter4_Track_Selection_and_Industry_Trends_CN":e.includes("/005_Chapter5/")?"/005_Chapter5_Stock_Screening_Strategies_CN":e.includes("/006_Chapter6/")?"/006_Chapter6_Trading_Strategies_and_Execution_CN":e.includes("/007_Chapter7/")?"/007_Chapter7_Investment_Decision_Tools_and_Resources_CN":e.includes("/008_Chapter8/")?"/008_Chapter8_Case_Review_and_Strategy_Improvement_CN":e.includes("/009_Chapter9/")?"/009_Chapter9_Building_an_Investment_System_CN":e.includes("/010_Chapter10/")?"/010_Chapter10_Trading_Execution_and_Practical_Guide_CN":e.includes("/011_Appendix/")?"/011_Appendix_CN":e.startsWith("/001_Chapter")||e.startsWith("/002_Chapter")||e.startsWith("/003_Chapter")||e.startsWith("/004_Chapter")||e.startsWith("/005_Chapter")||e.startsWith("/006_Chapter")||e.startsWith("/007_Chapter")||e.startsWith("/008_Chapter")||e.startsWith("/009_Chapter")||e.startsWith("/010_Chapter")||e.startsWith("/011_Appendix")||e.startsWith("/000_Preface")?"/handbook/theory":(e.includes("/handbook/"),"/")}function c(){return["/","/000_Preface_CN","/handbook/theory","/001_Chapter1_Know_Yourself_and_the_World_CN","/001_Chapter1/1.1_Self_Awareness_and_Investment_Wisdom_CN","/001_Chapter1/1.2_Understanding_the_World_CN","/001_Chapter1/1.3_From_Cognition_to_Action_CN","/002_Chapter2_Investment_Psychology_and_Risk_Management_CN","/002_Chapter2/2.1_Personalized_Risk_Tolerance_Model_CN","/002_Chapter2/2.2_Stop_Loss_and_Risk_Control_CN","/002_Chapter2/2.3_Investment_Emotions_and_Decision_Traps_CN","/002_Chapter2/2.4_Maintaining_Discipline_in_Volatile_Markets_CN","/003_Chapter3_Historical_Patterns_and_Multibagger_Stocks_CN","/003_Chapter3/3.1_Definition_and_Time_Dimensions_CN","/003_Chapter3/3.2_Industry_Distribution_and_Characteristics_CN","/003_Chapter3/3.3_Driving_Factors_CN","/003_Chapter3/3.4_Case_Studies_CN","/004_Chapter4_Track_Selection_and_Industry_Trends_CN","/004_Chapter4/4.1_Track_Screening_Methods_CN","/004_Chapter4/4.2_AI_and_Big_Data_Revolution_CN","/004_Chapter4/4.3_New_Energy_and_EV_Golden_Decade_CN","/004_Chapter4/4.4_Biotech_and_Precision_Medicine_CN","/004_Chapter4/4.5_Semiconductor_and_Metaverse_CN","/004_Chapter4/4.6_Chinese_Stocks_Opportunities_CN","/005_Chapter5_Stock_Screening_Strategies_CN","/005_Chapter5/5.1_Stock_Screening_Methods_CN","/005_Chapter5/5.2_Fundamental_Screening_Parameters_CN","/005_Chapter5/5.3_Technical_Analysis_CN","/005_Chapter5/5.4_Valuation_Methodology_CN","/005_Chapter5/5.5_Stock_Screening_Practice_CN","/005_Chapter5/5.6_Derivatives_Enhancement_CN","/006_Chapter6_Trading_Strategies_and_Execution_CN","/006_Chapter6/6.1_Long_term_vs_Short_term_CN","/006_Chapter6/6.2_Position_Management_CN","/006_Chapter6/6.3_ETF_Optimization_CN","/006_Chapter6/6.4_Dynamic_Adjustment_CN","/006_Chapter6/6.5_Growth_Stock_Exit_CN","/006_Chapter6/6.6_Strategy_Execution_CN","/007_Chapter7_Investment_Decision_Tools_and_Resources_CN","/007_Chapter7/7.1_GuruFocus_Morningstar_CN","/007_Chapter7/7.2_Technical_Analysis_Tools_CN","/007_Chapter7/7.3_Data_Driven_Decision_CN","/007_Chapter7/7.4_Research_News_Resources_CN","/007_Chapter7/7.5_Broker_Platform_Tools_CN","/007_Chapter7/7.6_ChatGPT_Integration_CN","/008_Chapter8_Case_Review_and_Strategy_Improvement_CN","/008_Chapter8/8.1_Broadcom_Case_Study_CN","/008_Chapter8/8.2_NVIDIA_Case_Study_CN","/008_Chapter8/8.3_Case_Review_Methodology_CN","/009_Chapter9_Building_an_Investment_System_CN","/009_Chapter9/9.1_Efficient_Investment_Lifestyle_CN","/009_Chapter9/9.2_Strategy_Review_Optimization_CN","/009_Chapter9/9.3_Personal_Investment_System_CN","/010_Chapter10_Trading_Execution_and_Practical_Guide_CN","/010_Chapter10/10.1_Preparation_CN","/010_Chapter10/10.2_Gurufocus_Screening_CN","/010_Chapter10/10.3_Trading_Execution_CN","/011_Appendix_CN","/011_Appendix/A.1_Financial_Indicators_and_Formulas_CN","/011_Appendix/B.1_Recommended_Reading_List_CN","/011_Appendix/C.1_Quantitative_Analysis_and_Backtesting_CN","/011_Appendix/D.1_Trading_Plan_Templates_CN","/011_Appendix/E.1_Broker_Platform_Guide_CN","/011_Appendix/F.1_GuruFocus_Plus_Case_Study_CN","/011_Appendix/G.1_Charlie_Munger_Wisdom_CN","/011_Appendix/H.1_Intelligent_Trading_System_CN","/011_Appendix/I.1_US_Stock_Investment_FAQ_CN","/011_Appendix/J.1_Document_System_Construction_Guide_CN","/handbook/macro","/handbook/stocks","/handbook/technical","/handbook/quantitative"]}function y(){const e=c(),n=window.location.pathname,t=e.indexOf(n);t>0&&(window.location.href=e[t-1])}function S(){const e=c(),n=window.location.pathname,t=e.indexOf(n);t>=0&&t<e.length-1&&(window.location.href=e[t+1])}function I(){const e=c(),n=window.location.pathname,t=e.indexOf(n),i=document.getElementById("prevPageBtn"),a=document.getElementById("nextPageBtn");i&&a&&(i.disabled=t<=0,a.disabled=t>=e.length-1,t>0?i.title="上一页":i.title="已是第一页",t<e.length-1?a.title="下一页":a.title="已是最后一页")}function k(){const e=document.getElementById("backToTop");window.addEventListener("scroll",()=>{e&&(window.scrollY>300?e.style.display="flex":e.style.display="none")}),e?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function v(){_.focusMode&&s()}function s(){const e=document.getElementById("readingProgress");e&&(e.style.display="block",window.addEventListener("scroll",l))}function d(){const e=document.getElementById("readingProgress");e&&(e.style.display="none",window.removeEventListener("scroll",l))}function l(){const e=document.getElementById("readingProgressBar");if(!e)return;const n=window.pageYOffset,t=document.documentElement.scrollHeight-window.innerHeight,i=n/t*100;e.style.width=i+"%"}function b(){document.addEventListener("keydown",e=>{e.key==="Escape"&&_.focusMode&&document.getElementById("toggleReadingMode")?.click(),(e.ctrlKey||e.metaKey)&&e.key==="="&&(e.preventDefault(),document.getElementById("increaseFont")?.click()),(e.ctrlKey||e.metaKey)&&e.key==="-"&&(e.preventDefault(),document.getElementById("decreaseFont")?.click()),(e.ctrlKey||e.metaKey)&&e.key==="d"&&(e.preventDefault(),document.getElementById("themeToggle")?.click())})}
